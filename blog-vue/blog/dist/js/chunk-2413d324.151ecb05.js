(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2413d324"],{"0944":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"message-banner",style:t.cover},[a("div",{staticClass:"message-container"},[a("h1",{staticClass:"message-title"},[t._v("留言板")]),a("div",{staticClass:"animated fadeInUp message-input-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.messageContent,expression:"messageContent"}],attrs:{placeholder:"说点什么吧"},domProps:{value:t.messageContent},on:{click:function(e){t.show=!0},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)},input:function(e){e.target.composing||(t.messageContent=e.target.value)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"ml-3 animated bounceInLeft",on:{click:t.addToList}},[t._v(" 发送 ")])])]),a("div",{staticClass:"barrage-container"},[a("vue-baberrage",{attrs:{barrageList:t.barrageList},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"barrage-items"},[a("img",{staticStyle:{"border-radius":"50%"},attrs:{src:e.item.avatar,width:"30",height:"30"}}),a("span",{staticClass:"ml-2"},[t._v(t._s(e.item.nickname)+" :")]),a("span",{staticClass:"ml-2"},[t._v(t._s(e.item.messageContent))])])]}}])})],1)])])},n=[],i=(a("498a"),{mounted:function(){this.listMessage()},data:function(){return{show:!1,messageContent:"",barrageList:[],cover:{backgroundImage:"url("+a("c88a")+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.8,backgroundSize:"100% 100%"}}},methods:{addToList:function(){var t=this;if(""==this.messageContent.trim())return this.$toast({type:"error",message:"留言不能为空"}),!1;var e=this.$store.state.avatar?this.$store.state.avatar:this.$store.state.blogInfo.websiteConfig.touristAvatar,a=this.$store.state.nickname?this.$store.state.nickname:"游客",s={avatar:e,nickname:a,messageContent:this.messageContent,time:Math.floor(3*Math.random())+7};this.messageContent="",this.axios.post("/api/messages",s).then((function(e){var a=e.data;a.flag?(t.barrageList.push(s),t.$toast({type:"success",message:"留言成功"})):t.$toast({type:"error",message:a.message})}))},listMessage:function(){var t=this;this.axios.get("/api/messages").then((function(e){var a=e.data;a.flag&&(t.barrageList=a.data)}))}},computed:{}}),r=i,o=(a("69da"),a("2877")),c=Object(o["a"])(r,s,n,!1,null,"8747cdda",null);e["default"]=c.exports},"69da":function(t,e,a){"use strict";var s=a("7cc6"),n=a.n(s);n.a},"7cc6":function(t,e,a){},c88a:function(t,e,a){t.exports=a.p+"img/message.3bae32a8.png"}}]);
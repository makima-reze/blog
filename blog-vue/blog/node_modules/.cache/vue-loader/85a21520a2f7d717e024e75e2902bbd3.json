{"remainingRequest":"E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\src\\views\\user\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\src\\views\\user\\User.vue","mtime":1672192360810},{"path":"E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2023holiday\\java\\demo\\demo3-blog-X1192176811\\blog-master\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBdmF0YXJDcm9wcGVyIGZyb20gInZ1ZS1hdmF0YXItY3JvcHBlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEF2YXRhckNyb3BwZXIgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJJbmZvOiB7CiAgICAgICAgbmlja25hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLm5pY2tuYW1lLAogICAgICAgIGludHJvOiB0aGlzLiRzdG9yZS5zdGF0ZS5pbnRybywKICAgICAgICB3ZWJTaXRlOiB0aGlzLiRzdG9yZS5zdGF0ZS53ZWJTaXRlLAogICAgICAgIGxvZ2luVHlwZTogdGhpcy4kc3RvcmUuc3RhdGUubG9naW5UeXBlCiAgICAgIH0sCiAgICAgIGNvdmVyOnsKICAgICAgYmFja2dyb3VuZEltYWdlOiAidXJsKCIgKyByZXF1aXJlKCIuLi8uLi9hc3NldHMvZmlnL3VzZXIucG5nIikgKyAiKSIsCiAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICJuby1yZXBlYXQiLAogICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ImNlbnRlciBjZW50ZXIiLAogICAgICBvcGFjaXR5OjAuOCwKICAgICAgYmFja2dyb3VuZFNpemU6ICIxMDAlIDEwMCUiLAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRhVXNlckluZm8oKSB7CiAgICAgIHRoaXMuYXhpb3MucHV0KCIvYXBpL3VzZXJzL2luZm8iLCB0aGlzLnVzZXJJbmZvKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlVXNlckluZm8iLCB0aGlzLnVzZXJJbmZvKTsKICAgICAgICAgIHRoaXMuJHRvYXN0KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfIiB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAiZXJyb3IiLCBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRBdmF0YXIoZGF0YSkgewogICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVBdmF0YXIiLCBkYXRhLmRhdGEpOwogICAgICAgIHRoaXMuJHRvYXN0KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi5LiK5Lyg5oiQ5YqfIiB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSB9KTsKICAgICAgfQogICAgfSwKICAgIG9wZW5FbWFpbE1vZGVsKCkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lbWFpbEZsYWcgPSB0cnVlOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVtYWlsKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZW1haWw7CiAgICB9LAogICAgbG9naW5UeXBlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubG9naW5UeXBlOwogICAgfQogICAgLy8gY292ZXIoKSB7CiAgICAvLyAgIHZhciBjb3ZlciA9ICIiOwogICAgLy8gICB0aGlzLiRzdG9yZS5zdGF0ZS5ibG9nSW5mby5wYWdlTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgLy8gICAgIGlmIChpdGVtLnBhZ2VMYWJlbCA9PSAidXNlciIpIHsKICAgIC8vICAgICAgIGNvdmVyID0gaXRlbS5wYWdlQ292ZXI7CiAgICAvLyAgICAgfQogICAgLy8gICB9KTsKICAgIC8vICAgcmV0dXJuICJiYWNrZ3JvdW5kOiB1cmwoIiArIGNvdmVyICsgIikgY2VudGVyIGNlbnRlciAvIGNvdmVyIG5vLXJlcGVhdCI7CiAgICAvLyB9CiAgfQp9Owo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div>\n    <div class=\"banner\" :style=\"cover\">\n      <h1 class=\"banner-title\">个人中心</h1>\n    </div>\n    <v-card class=\"blog-container\">\n      <div>\n        <span class=\"info-title\">基本信息</span>\n      </div>\n      <v-row class=\"info-wrapper\">\n        <v-col md=\"3\" cols=\"12\">\n          <button id=\"pick-avatar\">\n            <v-avatar size=\"140\">\n              <img :src=\"this.$store.state.avatar\" />\n            </v-avatar>\n          </button>\n          <avatar-cropper\n            @uploaded=\"uploadAvatar\"\n            trigger=\"#pick-avatar\"\n            upload-url=\"/api/users/avatar\"\n          />\n        </v-col>\n        <v-col md=\"7\" cols=\"12\">\n          <v-text-field\n            v-model=\"userInfo.nickname\"\n            label=\"昵称\"\n            placeholder=\"请输入您的昵称\"\n          />\n          <v-text-field\n            v-model=\"userInfo.webSite\"\n            class=\"mt-7\"\n            label=\"个人网站\"\n            placeholder=\"http://你的网址\"\n          />\n          <v-text-field\n            v-model=\"userInfo.intro\"\n            class=\"mt-7\"\n            label=\"简介\"\n            placeholder=\"介绍下自己吧\"\n          />\n          <div v-if=\"loginType != 0\" class=\"mt-7 binding\">\n            <v-text-field\n              disabled\n              v-model=\"email\"\n              label=\"邮箱号\"\n              placeholder=\"请绑定邮箱\"\n            />\n            <v-btn v-if=\"email\" text small @click=\"openEmailModel\">\n              修改绑定\n            </v-btn>\n            <v-btn v-else text small @click=\"openEmailModel\">\n              绑定邮箱\n            </v-btn>\n          </div>\n          <v-btn @click=\"updataUserInfo\" outlined class=\"mt-5\">修改</v-btn>\n        </v-col>\n      </v-row>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport AvatarCropper from \"vue-avatar-cropper\";\nexport default {\n  components: { AvatarCropper },\n  data: function() {\n    return {\n      userInfo: {\n        nickname: this.$store.state.nickname,\n        intro: this.$store.state.intro,\n        webSite: this.$store.state.webSite,\n        loginType: this.$store.state.loginType\n      },\n      cover:{\n      backgroundImage: \"url(\" + require(\"../../assets/fig/user.png\") + \")\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundPosition:\"center center\",\n      opacity:0.8,\n      backgroundSize: \"100% 100%\",\n      }\n    };\n  },\n  methods: {\n    updataUserInfo() {\n      this.axios.put(\"/api/users/info\", this.userInfo).then(({ data }) => {\n        if (data.flag) {\n          this.$store.commit(\"updateUserInfo\", this.userInfo);\n          this.$toast({ type: \"success\", message: \"修改成功\" });\n        } else {\n          this.$toast({ type: \"error\", message: data.message });\n        }\n      });\n    },\n    uploadAvatar(data) {\n      if (data.flag) {\n        this.$store.commit(\"updateAvatar\", data.data);\n        this.$toast({ type: \"success\", message: \"上传成功\" });\n      } else {\n        this.$toast({ type: \"error\", message: data.message });\n      }\n    },\n    openEmailModel() {\n      this.$store.state.emailFlag = true;\n    }\n  },\n  computed: {\n    email() {\n      return this.$store.state.email;\n    },\n    loginType() {\n      return this.$store.state.loginType;\n    }\n    // cover() {\n    //   var cover = \"\";\n    //   this.$store.state.blogInfo.pageList.forEach(item => {\n    //     if (item.pageLabel == \"user\") {\n    //       cover = item.pageCover;\n    //     }\n    //   });\n    //   return \"background: url(\" + cover + \") center center / cover no-repeat\";\n    // }\n  }\n};\n</script>\n\n<style scoped>\n.info-title {\n  font-size: 1.25rem;\n  font-weight: bold;\n}\n.info-wrapper {\n  margin-top: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n#pick-avatar {\n  outline: none;\n}\n.binding {\n  display: flex;\n  align-items: center;\n}\n</style>\n"]}]}